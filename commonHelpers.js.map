{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport const getData = async (searchQuery, currentPage) => {\n  const response = await axios.get('/api', {\n    params: {\n      key: '43212506-95870309335e8ebf3ea9c8656',\n      q: searchQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: currentPage,\n      per_page: 15,\n    },\n  });\n\n  return response;\n};\n","export const renderElements = searchData => {\n  return searchData\n    .map(img => {\n      return `\n      <li class=\"gallery-item\"><a href=\"${img.largeImageURL}\" class=\"gallery-link\"><img src=\"${img.webformatURL}\"\n            alt=\"${img.tags}\" class=\"gallery-img\"></a>\n        <div class=\"card-content\">\n          <div class=\"label-cont\"><span class=\"label\">Likes</span><span class=\"value\">${img.likes}</span></div>\n          <div class=\"label-cont\"><span class=\"label\">Views</span><span class=\"value\">${img.views}</span></div>\n          <div class=\"label-cont\"><span class=\"label\">Comments</span><span class=\"value\">${img.comments}</span>\n          </div>\n          <div class=\"label-cont\"><span class=\"label\">Downloads</span><span class=\"value\">${img.downloads}</span></div>\n        </div>\n      </li>\n      `;\n    })\n    .join('');\n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport { getData } from './js/pixabay-api';\nimport { renderElements } from './js/render-functions';\n\nconst elements = {\n  searchForm: document.querySelector('.search-form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadButton: document.querySelector('.load-button'),\n};\n\nconst messages = {\n  noMatches() {\n    iziToast.show({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      messageColor: '#fff',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n    });\n  },\n  loadsLimit() {\n    iziToast.show({\n      message: 'We are sorry, but you have reached the end of search results.',\n      messageColor: '#fff',\n      backgroundColor: '#0099FF',\n      position: 'topRight',\n    });\n  },\n};\n\nconst options = {\n  captionsData: 'alt',\n  captionDelay: 250,\n};\nconst imageModal = new SimpleLightbox('.gallery a', options);\n\nlet currentPage = null;\nlet searchInputValue = null;\nlet hitsCount = null;\n\nconst onSearchFormSubmit = event => {\n  event.preventDefault();\n\n  hitsCount = 15;\n  currentPage = 1;\n\n  elements.gallery.innerHTML = '';\n  elements.loader.classList.add('is-visible');\n  elements.loadButton.classList.remove('is-visible');\n\n  searchInputValue = event.srcElement.elements.search_input.value;\n\n  getData(searchInputValue, currentPage)\n    .then(response => {\n      if (response.data.hits.length === 0) {\n        messages.noMatches();\n\n        return;\n      }\n\n      elements.gallery.innerHTML = renderElements(response.data.hits);\n\n      elements.loadButton.classList.add('is-visible');\n\n      imageModal.refresh();\n    })\n    .catch(error => {\n      console.log(error);\n    })\n    .finally(() => {\n      elements.loader.classList.remove('is-visible');\n    });\n};\n\nconst onLoadButtonClick = () => {\n  const galleryItemDimensions = document\n    .querySelector('.gallery-item')\n    .getBoundingClientRect();\n\n  hitsCount += 15;\n  currentPage += 1;\n\n  elements.loadButton.classList.remove('is-visible');\n  elements.loader.classList.add('is-visible');\n\n  getData(searchInputValue, currentPage)\n    .then(response => {\n      elements.gallery.insertAdjacentHTML(\n        'beforeend',\n        renderElements(response.data.hits)\n      );\n\n      imageModal.refresh();\n\n      scrollBy({\n        top: galleryItemDimensions.height * 2,\n        behavior: 'smooth',\n      });\n\n      if (hitsCount >= response.data.totalHits) {\n        messages.loadsLimit();\n\n        return;\n      }\n\n      elements.loadButton.classList.add('is-visible');\n    })\n    .catch(error => {\n      console.log(error);\n    })\n    .finally(() => {\n      elements.loader.classList.remove('is-visible');\n    });\n\n  currentPage++;\n};\n\nelements.searchForm.addEventListener('submit', onSearchFormSubmit);\nelements.loadButton.addEventListener('click', onLoadButtonClick);\n"],"names":["axios","getData","searchQuery","currentPage","renderElements","searchData","img","elements","messages","iziToast","options","imageModal","SimpleLightbox","searchInputValue","hitsCount","onSearchFormSubmit","event","response","error","onLoadButtonClick","galleryItemDimensions"],"mappings":"owBACAA,EAAM,SAAS,QAAU,sBAElB,MAAMC,EAAU,MAAOC,EAAaC,IACxB,MAAMH,EAAM,IAAI,OAAQ,CACvC,OAAQ,CACN,IAAK,qCACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACL,CAAG,ECdUC,EAAiBC,GACrBA,EACJ,IAAIC,GACI;AAAA,0CAC6BA,EAAI,aAAa,oCAAoCA,EAAI,YAAY;AAAA,mBAC5FA,EAAI,IAAI;AAAA;AAAA,wFAE6DA,EAAI,KAAK;AAAA,wFACTA,EAAI,KAAK;AAAA,2FACNA,EAAI,QAAQ;AAAA;AAAA,4FAEXA,EAAI,SAAS;AAAA;AAAA;AAAA,OAIpG,EACA,KAAK,EAAE,ECXNC,EAAW,CACf,WAAY,SAAS,cAAc,cAAc,EACjD,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,EACxC,WAAY,SAAS,cAAc,cAAc,CACnD,EAEMC,EAAW,CACf,WAAY,CACVC,EAAS,KAAK,CACZ,QACE,2EACF,aAAc,OACd,gBAAiB,UACjB,SAAU,UAChB,CAAK,CACF,EACD,YAAa,CACXA,EAAS,KAAK,CACZ,QAAS,gEACT,aAAc,OACd,gBAAiB,UACjB,SAAU,UAChB,CAAK,CACF,CACH,EAEMC,EAAU,CACd,aAAc,MACd,aAAc,GAChB,EACMC,EAAa,IAAIC,EAAe,aAAcF,CAAO,EAE3D,IAAIP,EAAc,KACdU,EAAmB,KACnBC,EAAY,KAEhB,MAAMC,EAAqBC,GAAS,CAClCA,EAAM,eAAc,EAEpBF,EAAY,GACZX,EAAc,EAEdI,EAAS,QAAQ,UAAY,GAC7BA,EAAS,OAAO,UAAU,IAAI,YAAY,EAC1CA,EAAS,WAAW,UAAU,OAAO,YAAY,EAEjDM,EAAmBG,EAAM,WAAW,SAAS,aAAa,MAE1Df,EAAQY,EAAkBV,CAAW,EAClC,KAAKc,GAAY,CAChB,GAAIA,EAAS,KAAK,KAAK,SAAW,EAAG,CACnCT,EAAS,UAAS,EAElB,MACD,CAEDD,EAAS,QAAQ,UAAYH,EAAea,EAAS,KAAK,IAAI,EAE9DV,EAAS,WAAW,UAAU,IAAI,YAAY,EAE9CI,EAAW,QAAO,CACxB,CAAK,EACA,MAAMO,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,EACA,QAAQ,IAAM,CACbX,EAAS,OAAO,UAAU,OAAO,YAAY,CACnD,CAAK,CACL,EAEMY,EAAoB,IAAM,CAC9B,MAAMC,EAAwB,SAC3B,cAAc,eAAe,EAC7B,wBAEHN,GAAa,GACbX,GAAe,EAEfI,EAAS,WAAW,UAAU,OAAO,YAAY,EACjDA,EAAS,OAAO,UAAU,IAAI,YAAY,EAE1CN,EAAQY,EAAkBV,CAAW,EAClC,KAAKc,GAAY,CAahB,GAZAV,EAAS,QAAQ,mBACf,YACAH,EAAea,EAAS,KAAK,IAAI,CACzC,EAEMN,EAAW,QAAO,EAElB,SAAS,CACP,IAAKS,EAAsB,OAAS,EACpC,SAAU,QAClB,CAAO,EAEGN,GAAaG,EAAS,KAAK,UAAW,CACxCT,EAAS,WAAU,EAEnB,MACD,CAEDD,EAAS,WAAW,UAAU,IAAI,YAAY,CACpD,CAAK,EACA,MAAMW,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,EACA,QAAQ,IAAM,CACbX,EAAS,OAAO,UAAU,OAAO,YAAY,CACnD,CAAK,EAEHJ,GACF,EAEAI,EAAS,WAAW,iBAAiB,SAAUQ,CAAkB,EACjER,EAAS,WAAW,iBAAiB,QAASY,CAAiB"}