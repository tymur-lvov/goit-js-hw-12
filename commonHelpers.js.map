{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const getData = (searchQuery, currentPage) => {\n  const axiosOptions = {\n    params: {\n      key: '43212506-95870309335e8ebf3ea9c8656',\n      q: searchQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: currentPage,\n      per_page: 15,\n    },\n  };\n\n  return axios.get('https://pixabay.com/api', axiosOptions);\n};\n","export const renderElements = searchQuery => {\n  return searchQuery\n    .map(img => {\n      return `\n      <li class=\"gallery-item\"><a href=\"${img.largeImageURL}\" class=\"gallery-link\"><img src=\"${img.webformatURL}\"\n            alt=\"${img.tags}\" class=\"gallery-img\"></a>\n        <div class=\"card-content\">\n          <div class=\"label-cont\"><span class=\"label\">Likes</span><span class=\"value\">${img.likes}</span></div>\n          <div class=\"label-cont\"><span class=\"label\">Views</span><span class=\"value\">${img.views}</span></div>\n          <div class=\"label-cont\"><span class=\"label\">Comments</span><span class=\"value\">${img.comments}</span>\n          </div>\n          <div class=\"label-cont\"><span class=\"label\">Downloads</span><span class=\"value\">${img.downloads}</span></div>\n        </div>\n      </li>\n      `;\n    })\n    .join('');\n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport { getData } from './js/pixabay-api';\nimport { renderElements } from './js/render-functions';\n\nconst elements = {\n  searchForm: document.querySelector('.search-form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadButton: document.querySelector('.load-button'),\n};\n\nconst messages = {\n  noMatches() {\n    iziToast.show({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      messageColor: '#fff',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n    });\n  },\n  loadsLimit() {\n    iziToast.show({\n      message: 'We are sorry, but you have reached the end of search results.',\n      messageColor: '#fff',\n      backgroundColor: '#0099FF',\n      position: 'topRight',\n    });\n  },\n};\n\nconst lightboxOptions = {\n  captionsData: 'alt',\n  captionDelay: 250,\n};\nconst imageModal = new SimpleLightbox('.gallery a', lightboxOptions);\n\nlet currentPage = null;\nlet searchInputValue = null;\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    currentPage = 1;\n\n    elements.gallery.innerHTML = '';\n\n    elements.loader.classList.add('is-visible');\n    elements.loadButton.classList.remove('is-visible');\n\n    searchInputValue = event.srcElement.elements.search_input.value;\n\n    const response = await getData(searchInputValue, currentPage);\n    const { data } = response;\n\n    elements.loader.classList.remove('is-visible');\n\n    if (data.hits.length === 0) {\n      messages.noMatches();\n\n      return;\n    }\n\n    elements.gallery.innerHTML = renderElements(data.hits);\n\n    imageModal.refresh();\n\n    if (data.totalHits <= 15) {\n      messages.loadsLimit();\n\n      return;\n    }\n\n    elements.loadButton.classList.add('is-visible');\n  } catch (error) {\n    elements.loader.classList.remove('is-visible');\n\n    console.log(error);\n  }\n};\n\nconst onLoadButtonClick = async () => {\n  try {\n    const galleryItemDimensions = document\n      .querySelector('.gallery-item')\n      .getBoundingClientRect();\n\n    currentPage++;\n\n    elements.loadButton.classList.remove('is-visible');\n    elements.loader.classList.add('is-visible');\n\n    const response = await getData(searchInputValue, currentPage);\n    const { data } = response;\n\n    elements.loader.classList.remove('is-visible');\n    elements.loadButton.classList.add('is-visible');\n\n    elements.gallery.insertAdjacentHTML('beforeend', renderElements(data.hits));\n\n    imageModal.refresh();\n\n    scrollBy({\n      top: galleryItemDimensions.height * 2,\n      behavior: 'smooth',\n    });\n\n    if (\n      response.config.params.page * response.config.params.per_page >=\n      data.totalHits\n    ) {\n      messages.loadsLimit();\n\n      elements.loadButton.classList.remove('is-visible');\n\n      return;\n    }\n  } catch (error) {\n    elements.loader.classList.remove('is-visible');\n\n    console.log(error);\n  }\n};\n\nelements.searchForm.addEventListener('submit', onSearchFormSubmit);\nelements.loadButton.addEventListener('click', onLoadButtonClick);\n"],"names":["getData","searchQuery","currentPage","axiosOptions","axios","renderElements","img","elements","messages","iziToast","lightboxOptions","imageModal","SimpleLightbox","searchInputValue","onSearchFormSubmit","event","response","data","error","onLoadButtonClick","galleryItemDimensions"],"mappings":"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"}